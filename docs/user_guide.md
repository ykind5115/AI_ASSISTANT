# CareMate 用户手册

欢迎使用 CareMate！这是一份详细的使用指南，帮助您更好地使用这个关怀型智能助手。

## 开始使用

### 首次启动

1. 启动应用后，打开浏览器访问 http://127.0.0.1:8000
2. 您会看到一个简洁的聊天界面
3. 在输入框输入消息，按 Enter 或点击"发送"按钮

### 基本对话

CareMate 会像朋友一样与您对话：
- 倾听您的感受和想法
- 给予温暖、鼓励的话语
- 提供积极的生活建议

**示例对话：**
- 您：我今天一个人加班到很晚，好累。
- CareMate：听起来你今天真的非常辛苦。你完成了很多工作，这值得被肯定。今晚回家后可以先做10分钟放松呼吸，然后早点休息。

### 登录（可选）

- 在页面顶部点击“登录/注册”，注册后登录即可。
- 登录后会在浏览器本地保存 Token，用于把会话、消息、定时推送等数据关联到对应账号。
- 通过 API 调用时：先 `POST /api/v1/auth/login` 获取 `access_token`，随后在请求头加 `Authorization: Bearer <token>`。

### 跨对话记忆（长期记忆）

- 新建对话后，CareMate 会把你过去对话的要点以“长期记忆摘要”的形式注入到新会话中，所以不需要把所有内容都堆在同一个对话里。
- 如果你希望它“记住”某段重要总结，可以在对话里明确说“这段请你记住/总结一下”，系统会更倾向刷新长期记忆摘要。

## 功能说明

### 1. 日常对话

CareMate 支持自然对话，您可以：
- 分享日常感受
- 讨论目标和计划
- 寻求情感支持
- 记录想法和进展

**提示**：
- 对话历史会自动保存
- 可以随时回顾之前的对话
- 所有数据仅存储在本地

### 2. 定时关怀推送

CareMate 可以定时发送关怀消息，提醒您关注自己的状态。

#### 设置定时推送

通过API设置（需要技术知识）：
```bash
# 设置每天早上8点推送
curl -X POST http://127.0.0.1:8000/api/v1/schedule \
  -H "Content-Type: application/json" \
  -d '{"cron_or_time": "08:00", "enabled": true}'
```

推送时间格式：
- 简单时间：`08:00`（每天8点）
- Cron表达式：`0 8 * * *`（每天8点）

#### 推送内容

每次推送包含：
- 过去几天的行为/成就总结
- 情绪观察
- 当日可执行建议
- 鼓励话语

### 3. 智能摘要

CareMate 会自动生成对话摘要，帮助您：
- 回顾最近的进展
- 了解自己的情绪变化
- 发现反复提及的问题

查看摘要：
- 访问 http://127.0.0.1:8000/api/v1/summaries
- 或通过API获取

### 4. 数据管理

#### 导出数据

导出所有对话和摘要：
```bash
python scripts/export_data.py
```

或通过API：
```bash
curl http://127.0.0.1:8000/api/v1/export > backup.json
```

#### 删除数据

**警告**：删除操作不可恢复！

通过API删除（需要确认）：
```bash
curl -X DELETE "http://127.0.0.1:8000/api/v1/data?confirm=true"
```

## 使用技巧

### 1. 有效对话

- **具体描述**：详细描述您的感受和情况，CareMate 能更好地理解
- **持续对话**：定期与 CareMate 对话，有助于建立更好的理解
- **设定目标**：在对话中提及您的目标，CareMate 会帮助您跟踪进展

### 2. 个性化设置

通过修改用户偏好（需要技术知识）：
- 语气偏好：温柔/中性/鼓励型
- 避免话题：设置不想讨论的话题
- 目标设置：记录您的目标

### 3. 隐私保护

- 所有数据存储在本地
- 不会上传到云端
- 可以随时导出或删除数据

## 安全功能

### 危险内容检测

如果 CareMate 检测到您可能正在经历困难：
- 会温和地建议您联系专业机构
- 显示本地化的紧急帮助信息
- 不会提供医疗或法律建议

**重要**：CareMate 仅提供情感支持，不能替代专业治疗。

### 紧急情况

如果您处于紧急情况：
- 立即拨打紧急电话
- 联系信任的朋友或家人
- 寻求专业心理健康服务

## 常见问题

### Q: 回复速度慢怎么办？

A: 
- 检查是否使用GPU加速（设置 `DEVICE=cuda`）
- 使用更小的模型
- 减少上下文长度

### Q: 如何更换模型？

A: 
1. 下载新模型到本地
2. 在 `.env` 中设置 `MODEL_PATH`
3. 重启应用

### Q: 数据存储在哪里？

A: 数据存储在 `data/caremate.db` 文件中。

### Q: 可以多用户使用吗？

A: 当前版本为单用户模式。多用户支持在后续版本中提供。

### Q: 如何备份数据？

A: 
1. 定期复制 `data/caremate.db` 文件
2. 使用导出脚本：`python scripts/export_data.py`

### Q: 推送没有收到？

A: 
- 检查调度任务是否启用
- 检查系统通知权限
- 查看日志文件

## 最佳实践

1. **定期对话**：每天花几分钟与 CareMate 对话
2. **记录进展**：在对话中提及您的目标和成就
3. **设置提醒**：配置定时推送，保持联系
4. **定期备份**：定期导出数据，防止丢失
5. **保持隐私**：不要分享敏感信息到公网

## 限制说明

- CareMate 不提供医疗、法律或专业治疗建议
- 回复基于模型训练数据，可能不完全准确
- 需要本地运行，需要一定的技术知识
- 模型性能取决于硬件配置

## 获取帮助

- 查看日志：`logs/caremate.log`
- 查看API文档：http://127.0.0.1:8000/docs
- 提交 Issue 获取技术支持

## 更新日志

查看 GitHub Releases 了解最新更新。

---

**记住**：CareMate 是您的陪伴助手，但专业问题请寻求专业帮助。照顾好自己！

